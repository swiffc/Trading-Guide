<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Sessions - Trading Guide</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../print.css" media="print">
</head>
<body>
    <!-- Skip Link -->
    <a href="#mainContent" class="skip-link">Skip to main content</a>
    
    <div class="header">
        <div class="header-content">
            <div>
                <h1>Quarterly Theory & BTMM Trading Guide</h1>
                <div class="header-subtitle">Daily Sessions + 90-Min Cycles + Micro Quarters</div>
            </div>
            <div class="current-time">
                <div class="time-display" id="currentTime">--:--:-- EST</div>
                <div class="session-indicator" id="sessionIndicator">Loading...</div>
            </div>
        </div>
    </div>

    <div class="main-container">
        <nav class="sidebar" id="sidebar" aria-label="Main navigation">
            <div class="nav-header">
                <a href="../index.html" style="text-decoration: none; color: inherit;">
                    <h2>üìö Trading Guide</h2>
                </a>
            </div>
            <div class="search-box">
                <label for="searchInput" class="visually-hidden">Search guide</label>
                <input type="text" id="searchInput" placeholder="Search guide..." aria-label="Search the trading guide" />
            </div>
            <div class="nav-links" id="navLinks">
                <!-- Navigation will be loaded by navigation.js -->
            </div>
        </nav>

        <!-- Content -->
        <main class="content" id="mainContent" role="main">
            <section class="section">
                <!-- LIVE MULTI-TIMEFRAME CYCLE BANNER -->
                <div id="cyclePositionBanner" style="position: sticky; top: 0; z-index: 100; background: linear-gradient(135deg, rgba(0, 0, 0, 0.95), rgba(20, 20, 40, 0.95)); border: 2px solid var(--accent-blue); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; backdrop-filter: blur(10px); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);">
                    <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
                        <div style="flex: 1; min-width: 200px;">
                            <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.25rem;">üåê CYCLE POSITION</div>
                            <div id="cyclePositionText" style="font-size: 1.1rem; font-weight: bold; color: var(--accent-green);">Loading...</div>
                        </div>
                        <div id="tradeQualityIndicator" style="padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: bold; text-align: center; min-width: 180px; animation: pulse 2s infinite;">
                            <div style="font-size: 0.85rem; margin-bottom: 0.25rem;">TRADE QUALITY</div>
                            <div id="tradeQualityText" style="font-size: 1.2rem;">--</div>
                        </div>
                        <div style="text-align: right; min-width: 150px;">
                            <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.25rem;">NEXT OPTIMAL</div>
                            <div id="nextOptimalTime" style="font-size: 1rem; font-weight: bold; color: var(--accent-yellow);">--</div>
                        </div>
                    </div>
                    <div id="cycleDetails" style="margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid rgba(255, 255, 255, 0.1); font-size: 0.9rem; color: var(--text-secondary);"></div>
                    
                    <!-- KEY TRADING PHASES TIMELINE -->
                    <div id="tradingPhasesTimeline" style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255, 255, 255, 0.1); display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;"></div>
                </div>

                <h2>üïê Daily Session Structure (EST)</h2>
                
                <div class="alert alert-info">
                    <strong>üí° Key Concept:</strong> The 24-hour trading day begins at 5:00 PM EST (Daily True Open). Each session aligns with Quarterly Theory phases and BTMM cycles.
                </div>

                <!-- TABBED NAVIGATION -->
                <div class="tabs" style="margin: 2rem 0;">
                    <button class="tab-button active" data-tab="overview">üìä Overview</button>
                    <button class="tab-button" data-tab="asian">üåô Asian Session</button>
                    <button class="tab-button" data-tab="london">üåç London Session</button>
                    <button class="tab-button" data-tab="ny">üóΩ NY Session</button>
                    <button class="tab-button" data-tab="pm">üåÜ PM Session</button>
                    <button class="tab-button" data-tab="timing">‚è∞ Timing & Bias</button>
                </div>

                <!-- TAB 1: OVERVIEW -->
                <div id="overview" class="tab-content active">
                    <h3>üìÖ Session Overview & Structure</h3>
                    
                    <div class="alert alert-success" style="margin-top: 1rem;">
                        <strong>üîó Integration:</strong> BTMM Sessions = Quarterly Theory phases. They're the SAME system!
                    </div>

                    <!-- LIVE CYCLE CARDS -->
                    <div id="live-cycle-overview" style="margin: 1.5rem 0; display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem;">
                        <!-- Cards will be populated by JavaScript -->
                    </div>

                    <table style="margin-top: 1.5rem;" id="sessionScheduleTable">
                        <tr>
                            <th>Time (EST)</th>
                            <th>Session</th>
                            <th>Quarterly Phase</th>
                            <th>BTMM Phase</th>
                            <th>Action</th>
                        </tr>
                        <tr style="background: rgba(74, 158, 255, 0.05);" data-time-marker="true">
                            <td><strong>5:00 PM</strong></td>
                            <td colspan="4" style="text-align: center;"><strong>DAILY TRUE OPEN</strong> - Reset point for new 24-hour cycle</td>
                        </tr>
                        <tr data-session="asian" data-start="1140" data-end="120">
                            <td>7:00 PM - 2:00 AM</td>
                            <td>ASIAN</td>
                            <td>Daily Q1</td>
                            <td>Accumulation</td>
                            <td>OBSERVE - Mark range high/low</td>
                        </tr>
                        <tr style="background: rgba(255, 215, 0, 0.05);" data-time-marker="true">
                            <td><strong>1:30 AM</strong></td>
                            <td colspan="4" style="text-align: center;"><strong>LONDON TRUE OPEN</strong> - Q2 begins</td>
                        </tr>
                        <tr data-session="london" data-start="120" data-end="660">
                            <td>2:00 AM - 11:00 AM</td>
                            <td>LONDON</td>
                            <td>Daily Q2</td>
                            <td>Manipulation</td>
                            <td>WATCH - Identify stop hunt & PF</td>
                        </tr>
                        <tr style="background: rgba(0, 255, 136, 0.05);" data-time-marker="true">
                            <td><strong>7:30 AM</strong></td>
                            <td colspan="4" style="text-align: center;"><strong>NY TRUE OPEN</strong> - Q3 begins</td>
                        </tr>
                        <tr data-session="ny-prime" data-start="540" data-end="630" style="background: rgba(0, 255, 136, 0.08); border: 2px solid var(--accent-green);">
                            <td><strong>9:00 AM - 10:30 AM</strong></td>
                            <td><strong>NY BEST WINDOW ‚≠ê</strong></td>
                            <td><strong>Q3 Distribution</strong></td>
                            <td><strong>Level III</strong></td>
                            <td><strong>TRADE HERE!</strong></td>
                        </tr>
                        <tr data-session="ny-pm" data-start="660" data-end="1020">
                            <td>11:00 AM - 5:00 PM</td>
                            <td>NY PM</td>
                            <td>Daily Q4</td>
                            <td>Continuation/Reversal</td>
                            <td>TRAIL/CLOSE - Lower probability</td>
                        </tr>
                    </table>

                    <div class="pattern-card" style="margin-top: 2rem;" id="sessionFlowCard">
                        <h4>üìä Session Interaction & Flow:</h4>
                        <ol style="padding-left: 1.5rem; line-height: 1.8;" id="sessionFlowList">
                            <li data-flow="asian" data-start="1140" data-end="120"><strong>Asian establishes range</strong> (7 PM - 2 AM) ‚Üí Mark Asian High/Low</li>
                            <li data-flow="london" data-start="120" data-end="570"><strong>London sweeps Asian range</strong> (2 AM - 9:30 AM) ‚Üí Stop hunt creates PF</li>
                            <li data-flow="ny" data-start="570" data-end="720"><strong>NY reverses London move</strong> (9:30 AM - 12 PM) ‚Üí True distribution</li>
                            <li data-flow="pm" data-start="720" data-end="1020"><strong>PM consolidates or extends</strong> (12 PM - 5 PM) ‚Üí Prepare for next day</li>
                        </ol>
                    </div>

                    <div class="alert alert-warning" style="margin-top: 1.5rem;">
                        <strong>‚ö†Ô∏è Critical Rule:</strong> If London moves UP, NY will move DOWN (and vice versa) - 70%+ of the time!
                    </div>

                    <!-- Live Trading Considerations -->
                    <div id="liveConsiderationsOverview" style="background: linear-gradient(135deg, rgba(74, 158, 255, 0.15), rgba(138, 43, 226, 0.15)); padding: 2rem; border-radius: 12px; margin-top: 2rem; border: 2px solid var(--accent-blue);">
                        <h4 style="color: var(--accent-blue); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            üìä Live Trading Considerations
                        </h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                            <!-- Content will be dynamically populated -->
                        </div>
                    </div>
                </div>

                <!-- TAB 2: ASIAN SESSION -->
                <div id="asian" class="tab-content">
                    <h3>üåô ASIAN SESSION (7:00 PM - 2:00 AM EST)</h3>
                    
                    <div class="card" style="border-left: 4px solid var(--accent-blue);">
                        <div class="card-title">Daily Q1 - Accumulation (BTMM: Accumulation)</div>
                        
                        <h4 style="color: var(--accent-yellow); margin-top: 1rem;">Characteristics:</h4>
                        <ul style="padding-left: 1.5rem; line-height: 1.8;">
                            <li><strong>Low volatility</strong> - Typically 40-80 pip range</li>
                            <li><strong>Tight consolidation</strong> - Slow, choppy price action</li>
                            <li><strong>Range-bound</strong> - Price stays within Asian High/Low</li>
                            <li><strong>Accumulation phase</strong> - Market makers positioning</li>
                            <li><strong>Gap from previous day's close</strong> - Creates imbalance</li>
                        </ul>

                        <h4 style="color: var(--accent-green); margin-top: 1.5rem;">Your Strategy:</h4>
                        <div class="alert alert-info">
                            <p><strong>DO NOT TRADE!</strong> (Unless scalping within tight range)</p>
                            <ul style="padding-left: 1.5rem; margin-top: 0.5rem;">
                                <li>‚úÖ Mark Asian High (AR High)</li>
                                <li>‚úÖ Mark Asian Low (AR Low)</li>
                                <li>‚úÖ Calculate 50% midpoint</li>
                                <li>‚úÖ Set alerts for range breakouts</li>
                                <li>‚úÖ Note range size (HOW-LOW pips)</li>
                            </ul>
                        </div>

                        <h4 style="color: var(--accent-yellow); margin-top: 1.5rem;">Why Asian Range Matters:</h4>
                        <p style="line-height: 1.8;">The Asian range becomes your <strong>reference point</strong> for the entire day. London will typically sweep one side of this range (stop hunt), then NY will reverse through it.</p>
                        
                        <!-- FRACTAL: 90-Minute Session Cycles -->
                        <div style="margin-top: 2rem; padding: 1.5rem; background: linear-gradient(135deg, rgba(74, 158, 255, 0.1), rgba(138, 43, 226, 0.1)); border-radius: 12px; border: 2px solid rgba(74, 158, 255, 0.3);">
                            <h4 style="color: var(--accent-blue); margin-bottom: 1rem;">üîÑ Fractal Structure: 90-Minute Session Cycles</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">Asian Session divides into 4x 90-minute quarters (macros):</p>
                            
                            <table style="width: 100%; margin-top: 1rem;">
                                <tr style="background: rgba(74, 158, 255, 0.1);">
                                    <th>Time (EST)</th>
                                    <th>90-Min Quarter</th>
                                    <th>Phase</th>
                                    <th>Daily + Session Alignment</th>
                                </tr>
                                <tr>
                                    <td><strong>7:00 PM - 8:30 PM</strong></td>
                                    <td>Session Q1</td>
                                    <td>Accumulation</td>
                                    <td><span style="background: rgba(74, 158, 255, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px; font-weight: bold;">Daily Q1 + Session Q1 = Double Accumulation</span></td>
                                </tr>
                                <tr style="background: rgba(255, 255, 255, 0.02);">
                                    <td><strong>8:30 PM - 10:00 PM</strong></td>
                                    <td>Session Q2</td>
                                    <td>Manipulation</td>
                                    <td><span style="background: rgba(255, 215, 0, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px;">Daily Q1 + Session Q2</span></td>
                                </tr>
                                <tr>
                                    <td><strong>10:00 PM - 11:30 PM</strong></td>
                                    <td>Session Q3</td>
                                    <td>Distribution</td>
                                    <td><span style="background: rgba(0, 255, 136, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px;">Daily Q1 + Session Q3</span></td>
                                </tr>
                                <tr style="background: rgba(255, 255, 255, 0.02);">
                                    <td><strong>11:30 PM - 1:00 AM</strong></td>
                                    <td>Session Q4</td>
                                    <td>Reversal</td>
                                    <td><span style="background: rgba(255, 87, 34, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px;">Daily Q1 + Session Q4</span></td>
                                </tr>
                            </table>
                            
                            <div class="alert alert-info" style="margin-top: 1rem;">
                                <strong>üìä Probability Note:</strong> Since Daily Cycle is Q1 (Accumulation) during entire Asian session, even the Session Q3 (10-11:30 PM) has lower probability than when both align in Q3 (like NY Session).
                            </div>
                        </div>
                        
                        <div class="pattern-card" style="margin-top: 1rem; border-left: 4px solid var(--accent-green);">
                            <p><strong>Example:</strong></p>
                            <p>Asian Range: 1.2500 (Low) to 1.2580 (High)</p>
                            <p>Midpoint: 1.2540</p>
                            <p>‚Üí London sweeps above 1.2580 (stop hunt)</p>
                            <p>‚Üí NY reverses below 1.2500 (real move)</p>
                        </div>
                    </div>

                    <div class="alert alert-warning" style="margin-top: 1.5rem;">
                        <strong>üîî Best Practice:</strong> Go to sleep knowing your Asian levels. When London starts (1:30 AM), you'll wake up to a clear picture of manipulation.
                    </div>

                    <!-- Cycle Theory Timing for Asian Session -->
                    <h4 style="margin-top: 2rem; color: var(--accent-blue);">üîÑ Cycle Theory: Asian Session Breakdown</h4>
                    <div class="pattern-card" style="border-left: 4px solid var(--accent-blue);">
                        <h4 style="color: var(--accent-yellow);">Daily Cycle Position:</h4>
                        <p><strong>Asian Session = Daily Q1 (Accumulation Phase)</strong></p>
                        <p>The entire 7-hour Asian session represents the ACCUMULATION phase of the daily cycle.</p>

                        <h4 style="color: var(--accent-green); margin-top: 1.5rem;">90-Minute Cycles Within Asian:</h4>
                        <div class="quarters-grid" style="margin-top: 1rem;">
                            <div class="quarter-card q1">
                                <div class="quarter-title">7:00 PM - 8:30 PM</div>
                                <div class="quarter-desc">Asian Q1<br>Accumulation begins</div>
                            </div>
                            <div class="quarter-card q2">
                                <div class="quarter-title">8:30 PM - 10:00 PM</div>
                                <div class="quarter-desc">Asian Q2<br>Manipulation (minor)</div>
                            </div>
                            <div class="quarter-card q3">
                                <div class="quarter-title">10:00 PM - 11:30 PM</div>
                                <div class="quarter-desc">Asian Q3<br>Distribution (minor)</div>
                            </div>
                            <div class="quarter-card q4">
                                <div class="quarter-title">11:30 PM - 1:00 AM</div>
                                <div class="quarter-desc">Asian Q4<br>Reversal/Setup for London</div>
                            </div>
                        </div>

                        <h4 style="color: var(--accent-yellow); margin-top: 1.5rem;">22.5-Minute Micro Quarters (Example: First 90-Min):</h4>
                        <table style="margin-top: 1rem; font-size: 0.9rem;">
                            <tr>
                                <th>Time</th>
                                <th>Micro Phase</th>
                                <th>What's Happening</th>
                            </tr>
                            <tr style="background: rgba(74, 158, 255, 0.05);">
                                <td>7:00 - 7:22 PM</td>
                                <td>Q1 Accumulation</td>
                                <td>Tight range, observe</td>
                            </tr>
                            <tr style="background: rgba(255, 215, 0, 0.05);">
                                <td>7:22 - 7:45 PM</td>
                                <td>Q2 Manipulation</td>
                                <td>Minor sweep, stop hunt</td>
                            </tr>
                            <tr style="background: rgba(0, 255, 136, 0.05);">
                                <td>7:45 - 8:07 PM</td>
                                <td>Q3 Distribution</td>
                                <td>Mini move completes</td>
                            </tr>
                            <tr>
                                <td>8:07 - 8:30 PM</td>
                                <td>Q4 Reversal</td>
                                <td>Reset for next 90-min</td>
                            </tr>
                        </table>

                        <div class="alert alert-info" style="margin-top: 1rem;">
                            <strong>üí° Key Insight:</strong> Asian session is ONE big accumulation phase (Daily Q1), but it contains its own 90-minute and 22.5-minute cycles. Most traders ignore these micro cycles during Asian - which is correct! Just mark the levels.
                        </div>
                    </div>

                    <!-- Live Trading Considerations -->
                    <div style="background: linear-gradient(135deg, rgba(74, 158, 255, 0.15), rgba(138, 43, 226, 0.15)); padding: 2rem; border-radius: 12px; margin-top: 2rem; border: 2px solid var(--accent-blue);">
                        <h4 style="color: var(--accent-blue); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            üåô Asian Session Live Considerations
                        </h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-green);">
                                <div style="font-weight: bold; color: var(--accent-green); margin-bottom: 0.5rem;">‚úÖ Pre-Market Routine</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li>Set alerts at Asian High/Low</li>
                                    <li>Mark 50% midpoint on chart</li>
                                    <li>Note range size (tight = explosive)</li>
                                    <li>Prepare watchlist for London</li>
                                </ul>
                            </div>
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-yellow);">
                                <div style="font-weight: bold; color: var(--accent-yellow); margin-bottom: 0.5rem;">üìä What to Track</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li>Asian High: _______</li>
                                    <li>Asian Low: _______</li>
                                    <li>Midpoint: _______</li>
                                    <li>Range: _______ pips</li>
                                </ul>
                            </div>
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-red);">
                                <div style="font-weight: bold; color: var(--accent-red); margin-bottom: 0.5rem;">üö´ Trading Rules</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li><strong>DO NOT TRADE</strong> during Asian</li>
                                    <li>Only observe & mark levels</li>
                                    <li>No scalping (unless expert)</li>
                                    <li>Save capital for NY session</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TAB 3: LONDON SESSION -->
                <div id="london" class="tab-content">
                    <h3>üåç LONDON SESSION (2:00 AM - 11:00 AM EST)</h3>
                    
                    <div class="card" style="border-left: 4px solid var(--accent-yellow);">
                        <div class="card-title">Daily Q2 - Manipulation (BTMM: Manipulation Phase)</div>
                        <p><strong>London True Open:</strong> 1:30 AM EST</p>
                        
                        <h4 style="color: var(--accent-yellow); margin-top: 1rem;">Characteristics:</h4>
                        <ul style="padding-left: 1.5rem; line-height: 1.8;">
                            <li><strong>HIGH volatility</strong> - Largest moves of the day</li>
                            <li><strong>Stop hunting</strong> - Sweeps Asian High OR Low</li>
                            <li><strong>False breakouts</strong> - Creates "Peak Formation" (PF)</li>
                            <li><strong>Manipulation complete</strong> - Retail trapped in wrong positions</li>
                            <li><strong>Volume imbalance</strong> - Sets up for NY reversal</li>
                        </ul>

                        <h4 style="color: var(--accent-green); margin-top: 1.5rem;">Your Strategy:</h4>
                        <div class="alert alert-warning">
                            <p><strong>WATCH & MARK - Don't Chase!</strong></p>
                            <ul style="padding-left: 1.5rem; margin-top: 0.5rem;">
                                <li>‚úÖ Did London sweep Asian High or Low?</li>
                                <li>‚úÖ Mark Peak Formation (PF) - extreme high or low</li>
                                <li>‚úÖ Wait for first rejection/reversal signal</li>
                                <li>‚úÖ Prepare for NY to trade opposite direction</li>
                                <li>‚úÖ Note if PF occurs near 4-6 AM (typical)</li>
                            </ul>
                        </div>

                        <div class="pattern-card" style="margin-top: 1.5rem; border-left: 4px solid var(--accent-red);">
                            <h4>üéØ London PF (Peak Formation) Strategy:</h4>
                            <p><strong>If London makes NEW HIGH:</strong></p>
                            <ul style="padding-left: 1.5rem;">
                                <li>‚Üí Expect NY to distribute DOWN</li>
                                <li>‚Üí Look for M-Top pattern</li>
                                <li>‚Üí Sell at PF rejection</li>
                            </ul>
                            <p style="margin-top: 1rem;"><strong>If London makes NEW LOW:</strong></p>
                            <ul style="padding-left: 1.5rem;">
                                <li>‚Üí Expect NY to distribute UP</li>
                                <li>‚Üí Look for W-Bottom pattern</li>
                                <li>‚Üí Buy at PF rejection</li>
                            </ul>
                        </div>
                    </div>

                    <h4 style="margin-top: 2rem;">‚è∞ Key London Times:</h4>
                    <table>
                        <tr>
                            <th>Time</th>
                            <th>Event</th>
                            <th>Significance</th>
                        </tr>
                        <tr>
                            <td><strong>1:30 AM</strong></td>
                            <td>London True Open</td>
                            <td>Initial momentum begins</td>
                        </tr>
                        <tr style="background: rgba(255, 215, 0, 0.1);">
                            <td><strong>3:45 AM</strong></td>
                            <td>London Brinks Time</td>
                            <td>‚≠ê Major liquidity spike</td>
                        </tr>
                        <tr>
                            <td><strong>4:00-6:00 AM</strong></td>
                            <td>PF Window</td>
                            <td>Peak Formation typically forms</td>
                        </tr>
                        <tr>
                            <td><strong>8:30 AM</strong></td>
                            <td>US Data Release</td>
                            <td>High volatility (NFP, CPI, etc.)</td>
                        </tr>
                    </table>

                    <!-- Cycle Theory Timing for London Session -->
                    <h4 style="margin-top: 2rem; color: var(--accent-yellow);">üîÑ Cycle Theory: London Session Breakdown</h4>
                    <div class="pattern-card" style="border-left: 4px solid var(--accent-yellow);">
                        <h4 style="color: var(--accent-yellow);">Daily Cycle Position:</h4>
                        <p><strong>London Session = Daily Q2 (Manipulation Phase)</strong></p>
                        <p>London creates the Peak Formation (PF) that NY will trade against. This is THE stop hunt!</p>

                        <h4 style="color: var(--accent-green); margin-top: 1.5rem;">90-Minute Cycles Within London:</h4>
                        <div class="quarters-grid" style="margin-top: 1rem;">
                            <div class="quarter-card q1">
                                <div class="quarter-title">1:30 AM - 3:00 AM</div>
                                <div class="quarter-desc">London Q1<br>True Open, initial move</div>
                            </div>
                            <div class="quarter-card q2">
                                <div class="quarter-title">3:00 AM - 4:30 AM</div>
                                <div class="quarter-desc">London Q2<br><strong>PF forms here! ‚≠ê</strong></div>
                            </div>
                            <div class="quarter-card q3">
                                <div class="quarter-title">4:30 AM - 6:00 AM</div>
                                <div class="quarter-desc">London Q3<br>Manipulation extension</div>
                            </div>
                            <div class="quarter-card q4">
                                <div class="quarter-title">6:00 AM - 7:30 AM</div>
                                <div class="quarter-desc">London Q4<br>Pre-NY positioning</div>
                            </div>
                        </div>
                        
                        <!-- FRACTAL ALIGNMENT TABLE -->
                        <div style="margin-top: 2rem; padding: 1.5rem; background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05)); border-radius: 12px; border: 2px solid rgba(255, 215, 0, 0.3);">
                            <h4 style="color: var(--accent-yellow); margin-bottom: 1rem;">üéØ Multi-Timeframe Alignment - London Session</h4>
                            
                            <table style="width: 100%; margin-top: 1rem;">
                                <tr style="background: rgba(255, 215, 0, 0.1);">
                                    <th>Time (EST)</th>
                                    <th>90-Min Quarter</th>
                                    <th>Phase</th>
                                    <th>Daily + Session Alignment</th>
                                    <th>Probability</th>
                                </tr>
                                <tr>
                                    <td><strong>1:30 AM - 3:00 AM</strong></td>
                                    <td>Session Q1</td>
                                    <td>Accumulation</td>
                                    <td><span style="background: rgba(255, 215, 0, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px;">Daily Q2 + Session Q1</span></td>
                                    <td>Medium</td>
                                </tr>
                                <tr style="background: rgba(255, 215, 0, 0.05); border: 2px solid var(--accent-yellow);">
                                    <td><strong>3:00 AM - 4:30 AM</strong></td>
                                    <td>Session Q2</td>
                                    <td>Manipulation</td>
                                    <td><span style="background: rgba(255, 215, 0, 0.3); padding: 0.25rem 0.5rem; border-radius: 4px; font-weight: bold;">Daily Q2 + Session Q2 = DOUBLE MANIPULATION ‚≠ê</span></td>
                                    <td><strong>HIGH - PF Window!</strong></td>
                                </tr>
                                <tr>
                                    <td><strong>4:30 AM - 6:00 AM</strong></td>
                                    <td>Session Q3</td>
                                    <td>Distribution</td>
                                    <td><span style="background: rgba(0, 255, 136, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px;">Daily Q2 + Session Q3</span></td>
                                    <td>Medium</td>
                                </tr>
                                <tr style="background: rgba(255, 255, 255, 0.02);">
                                    <td><strong>6:00 AM - 7:30 AM</strong></td>
                                    <td>Session Q4</td>
                                    <td>Reversal</td>
                                    <td><span style="background: rgba(255, 87, 34, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px;">Daily Q2 + Session Q4</span></td>
                                    <td>Medium</td>
                                </tr>
                            </table>
                            
                            <div class="alert alert-success" style="margin-top: 1rem;">
                                <strong>üî• Key Insight:</strong> 3:00-4:30 AM is when BOTH Daily and Session cycles are in Q2 (Manipulation). This is THE Peak Formation window! When both align in manipulation = maximum stop hunt probability.
                            </div>
                        </div>

                        <h4 style="color: var(--accent-blue); margin-top: 1.5rem;">22.5-Minute Micro Quarters (3:00-4:30 AM - PF Window):</h4>
                        <table style="margin-top: 1rem; font-size: 0.9rem;">
                            <tr>
                                <th>Time</th>
                                <th>Micro Phase</th>
                                <th>What's Happening</th>
                            </tr>
                            <tr style="background: rgba(74, 158, 255, 0.05);">
                                <td>3:00 - 3:22 AM</td>
                                <td>Q1 Accumulation</td>
                                <td>Building for big move</td>
                            </tr>
                            <tr style="background: rgba(255, 215, 0, 0.05);">
                                <td>3:22 - 3:45 AM</td>
                                <td>Q2 Manipulation</td>
                                <td><strong>Brinks Time! ‚≠ê</strong></td>
                            </tr>
                            <tr style="background: rgba(0, 255, 136, 0.05);">
                                <td>3:45 - 4:07 AM</td>
                                <td>Q3 Distribution</td>
                                <td>PF High/Low formed</td>
                            </tr>
                            <tr>
                                <td>4:07 - 4:30 AM</td>
                                <td>Q4 Reversal</td>
                                <td>First rejection signals</td>
                            </tr>
                        </table>

                        <div class="alert alert-success" style="margin-top: 1rem;">
                            <strong>üéØ Trading Edge:</strong> The London Q2 (3:00-4:30 AM) is when Peak Formation typically completes. Within this 90-min window, the 3:45 AM Brinks Time (micro Q2) is the EXACT liquidity spike where PF often forms. Mark this level - NY will trade opposite!
                        </div>
                    </div>

                    <!-- Live Trading Considerations -->
                    <div style="background: linear-gradient(135deg, rgba(255, 193, 7, 0.15), rgba(255, 152, 0, 0.15)); padding: 2rem; border-radius: 12px; margin-top: 2rem; border: 2px solid var(--accent-yellow);">
                        <h4 style="color: var(--accent-yellow); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            üåç London Session Live Considerations
                        </h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-green);">
                                <div style="font-weight: bold; color: var(--accent-green); margin-bottom: 0.5rem;">‚úÖ Key Questions</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li>Did price sweep Asian High or Low?</li>
                                    <li>Where is Peak Formation (PF)?</li>
                                    <li>M-Top or W-Bottom forming?</li>
                                    <li>Rejection or continuation?</li>
                                </ul>
                            </div>
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-yellow);">
                                <div style="font-weight: bold; color: var(--accent-yellow); margin-bottom: 0.5rem;">üìç Mark These Levels</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li>Peak Formation High/Low</li>
                                    <li>London Open price (1:30 AM)</li>
                                    <li>First rejection candle</li>
                                    <li>3:45 AM Brinks Time level</li>
                                </ul>
                            </div>
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-red);">
                                <div style="font-weight: bold; color: var(--accent-red); margin-bottom: 0.5rem;">‚ö†Ô∏è Common Traps</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li>Don't chase the breakout!</li>
                                    <li>Don't enter during stop hunt</li>
                                    <li>Wait for rejection confirmation</li>
                                    <li>Prepare for NY reversal</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TAB 4: NY SESSION -->
                <div id="ny" class="tab-content">
                    <h3>üóΩ NEW YORK SESSION (7:30 AM - 5:00 PM EST)</h3>
                    
                    <div class="card" style="border: 3px solid var(--accent-green); background: rgba(0, 255, 136, 0.05);">
                        <div class="card-title" style="color: var(--accent-green);">Daily Q3 - Distribution ‚≠ê‚≠ê‚≠ê (BTMM: Level III)</div>
                        <p><strong>NY True Open:</strong> 7:30 AM EST</p>
                        <p><strong>BEST TRADING WINDOW:</strong> 9:00 AM - 10:30 AM EST</p>
                        
                        <h4 style="color: var(--accent-green); margin-top: 1rem;">Why NY is THE Session:</h4>
                        <ul style="padding-left: 1.5rem; line-height: 1.8;">
                            <li><strong>Highest volume</strong> - US market participation</li>
                            <li><strong>True institutional moves</strong> - Not manipulation</li>
                            <li><strong>Multiple timeframes align</strong> - Daily Q3 + Session Q3 + 90-Min Q3</li>
                            <li><strong>70%+ win rate</strong> - When setup is proper</li>
                            <li><strong>Clear directional moves</strong> - Trend continuation or reversal</li>
                        </ul>

                        <h4 style="color: var(--accent-green); margin-top: 1.5rem;">Your Strategy:</h4>
                        <div class="alert alert-success">
                            <p><strong>üéØ THIS IS YOUR WINDOW!</strong></p>
                            <ul style="padding-left: 1.5rem; margin-top: 0.5rem;">
                                <li>‚úÖ Trade OPPOSITE of London direction (70% rule)</li>
                                <li>‚úÖ Enter at NY True Open rejection (7:30 AM)</li>
                                <li>‚úÖ Or wait for 9:30 AM Open sweep</li>
                                <li>‚úÖ Best entries: 9:45 AM (Brinks Time)</li>
                                <li>‚úÖ Look for M/W patterns at session extremes</li>
                                <li>‚úÖ Confirm with EMA alignment (13, 50, 200)</li>
                                <li>‚úÖ Only 1-2% risk per trade, max 3 positions</li>
                            </ul>
                        </div>

                        <div class="pattern-card" style="margin-top: 1.5rem; border-left: 4px solid var(--accent-blue);">
                            <h4>üìä NY Opening Scenarios:</h4>
                            
                            <p><strong>Scenario 1: Gap & Go</strong></p>
                            <p>‚Üí Price gaps in direction of daily bias</p>
                            <p>‚Üí Look for retest of gap, then continuation</p>
                            
                            <p style="margin-top: 1rem;"><strong>Scenario 2: Sweep & Reverse</strong></p>
                            <p>‚Üí 9:30 AM sweeps Asian High/Low</p>
                            <p>‚Üí Immediately reverses (classic manipulation)</p>
                            <p>‚Üí Enter on first pullback</p>
                            
                            <p style="margin-top: 1rem;"><strong>Scenario 3: Range Bound</strong></p>
                            <p>‚Üí Consolidation first 30 minutes</p>
                            <p>‚Üí Wait for 9:45 AM or 10:00 AM breakout</p>
                            <p>‚Üí Confirm with volume and EMA cross</p>
                        </div>
                    </div>

                    <h4 style="margin-top: 2rem;">‚è∞ Critical NY Times:</h4>
                    <table>
                        <tr>
                            <th>Time</th>
                            <th>Event</th>
                            <th>Action</th>
                        </tr>
                        <tr>
                            <td><strong>7:30 AM</strong></td>
                            <td>NY True Open</td>
                            <td>Mark opening price, prepare for direction</td>
                        </tr>
                        <tr style="background: rgba(0, 255, 136, 0.1);">
                            <td><strong>9:15 AM</strong></td>
                            <td>915 Rule Window</td>
                            <td>Multiple timeframes align</td>
                        </tr>
                        <tr style="background: rgba(0, 255, 136, 0.15); border: 2px solid var(--accent-green);">
                            <td><strong>9:30 AM</strong></td>
                            <td>Stock Market Open</td>
                            <td>‚≠ê‚≠ê‚≠ê Initial sweep, watch for reversal</td>
                        </tr>
                        <tr style="background: rgba(0, 255, 136, 0.15); border: 2px solid var(--accent-green);">
                            <td><strong>9:45 AM</strong></td>
                            <td>NY Brinks Time</td>
                            <td>‚≠ê‚≠ê‚≠ê BEST entry window</td>
                        </tr>
                        <tr>
                            <td><strong>10:00-10:30 AM</strong></td>
                            <td>Session Q3 Peak</td>
                            <td>Last optimal entries</td>
                        </tr>
                    </table>

                    <div class="alert alert-success" style="margin-top: 1.5rem;">
                        <strong>üéØ Perfect Storm Setup:</strong> When Daily Q3, Session Q3, and 90-Min Q3 all align between 9:00-10:30 AM = Maximum probability trade!
                    </div>

                    <!-- Cycle Theory Timing for NY Session -->
                    <h4 style="margin-top: 2rem; color: var(--accent-green);">üîÑ Cycle Theory: NY Session Breakdown (CRITICAL!)</h4>
                    <div class="pattern-card" style="border-left: 4px solid var(--accent-green); background: rgba(0, 255, 136, 0.03);">
                        <h4 style="color: var(--accent-green);">Daily Cycle Position:</h4>
                        <p><strong>NY Session = Daily Q3 (Distribution Phase) ‚≠ê‚≠ê‚≠ê</strong></p>
                        <p>THIS IS IT! The real institutional move. Daily Q3 + Session Q3 + 90-Min Q3 = MAXIMUM EDGE!</p>

                        <h4 style="color: var(--accent-blue); margin-top: 1.5rem;">90-Minute Cycles Within NY (MOST IMPORTANT):</h4>
                        <div class="quarters-grid" style="margin-top: 1rem;">
                            <div class="quarter-card q1">
                                <div class="quarter-title">7:30 AM - 9:00 AM</div>
                                <div class="quarter-desc">NY Q1<br>True Open, accumulation</div>
                            </div>
                            <div class="quarter-card q2">
                                <div class="quarter-title">9:00 AM - 10:30 AM</div>
                                <div class="quarter-desc">NY Q2<br><strong>Minor manipulation</strong></div>
                            </div>
                            <div class="quarter-card q3" style="border: 3px solid var(--accent-green); background: rgba(0, 255, 136, 0.15);">
                                <div class="quarter-title">10:30 AM - 12:00 PM</div>
                                <div class="quarter-desc"><strong>NY Q3 ‚≠ê‚≠ê‚≠ê</strong><br>BEST WINDOW!</div>
                            </div>
                            <div class="quarter-card q4">
                                <div class="quarter-title">12:00 PM - 1:30 PM</div>
                                <div class="quarter-desc">NY Q4<br>Transition to PM</div>
                            </div>
                        </div>

                        <h4 style="color: var(--accent-yellow); margin-top: 1.5rem;">22.5-Minute Micro Quarters (9:00-10:30 AM - PRIME ENTRY WINDOW):</h4>
                        <table style="margin-top: 1rem; font-size: 0.9rem;">
                            <tr>
                                <th>Time</th>
                                <th>Micro Phase</th>
                                <th>What's Happening</th>
                                <th>Action</th>
                            </tr>
                            <tr style="background: rgba(74, 158, 255, 0.05);">
                                <td>9:00 - 9:22 AM</td>
                                <td>Q1 Accumulation</td>
                                <td>9:15 AM - 915 Rule alignment</td>
                                <td>WATCH for setup</td>
                            </tr>
                            <tr style="background: rgba(255, 215, 0, 0.1); border: 2px solid var(--accent-yellow);">
                                <td><strong>9:22 - 9:45 AM</strong></td>
                                <td><strong>Q2 Manipulation</strong></td>
                                <td><strong>9:30 NYSE Open + 9:45 Brinks!</strong></td>
                                <td><strong>üî• ENTER HERE!</strong></td>
                            </tr>
                            <tr style="background: rgba(0, 255, 136, 0.1); border: 2px solid var(--accent-green);">
                                <td><strong>9:45 - 10:07 AM</strong></td>
                                <td><strong>Q3 Distribution</strong></td>
                                <td><strong>Real move begins!</strong></td>
                                <td><strong>üéØ TP1 hits</strong></td>
                            </tr>
                            <tr style="background: rgba(0, 255, 136, 0.05);">
                                <td>10:07 - 10:30 AM</td>
                                <td>Q4 Continuation</td>
                                <td>Trend extension, last entries</td>
                                <td>Trail stops to BE</td>
                            </tr>
                        </table>

                        <div class="alert alert-success" style="margin-top: 1rem; background: rgba(0, 255, 136, 0.1); border: 2px solid var(--accent-green);">
                            <h4 style="margin-bottom: 0.5rem; color: var(--accent-green);">üíé THE PERFECT STORM (Maximum Confluence):</h4>
                            <p style="margin: 0; line-height: 1.8;">
                                <strong>When:</strong> 9:45 AM - 10:07 AM<br>
                                <strong>Why:</strong> Daily Q3 + Session Q3 + 90-Min Q3 + Micro Q3 + Brinks Time ALL ALIGN<br>
                                <strong>What:</strong> This 22-minute window has the highest probability of any time in the 24-hour cycle!<br>
                                <strong>How:</strong> Enter at 9:45 AM Brinks Time rejection, ride the Q3 distribution wave
                            </p>
                        </div>
                        
                        <!-- FRACTAL ALIGNMENT TABLE - MOST IMPORTANT! -->
                        <div style="margin-top: 2rem; padding: 2rem; background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 255, 136, 0.05)); border-radius: 12px; border: 3px solid var(--accent-green); box-shadow: 0 8px 32px rgba(0, 255, 136, 0.3);">
                            <h4 style="color: var(--accent-green); margin-bottom: 1rem; font-size: 1.3rem;">üéØ Multi-Timeframe Alignment - NY Session (HOLY GRAIL!)</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">This table shows when Daily and Session cycles align for maximum probability:</p>
                            
                            <table style="width: 100%; margin-top: 1rem;">
                                <tr style="background: rgba(0, 255, 136, 0.1);">
                                    <th>Time (EST)</th>
                                    <th>90-Min Quarter</th>
                                    <th>Phase</th>
                                    <th>Daily + Session Alignment</th>
                                    <th>Probability</th>
                                </tr>
                                <tr>
                                    <td><strong>7:30 AM - 9:00 AM</strong></td>
                                    <td>Session Q1</td>
                                    <td>Accumulation</td>
                                    <td><span style="background: rgba(74, 158, 255, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px;">Daily Q3 + Session Q1</span></td>
                                    <td>Medium-High</td>
                                </tr>
                                <tr style="background: rgba(255, 215, 0, 0.05);">
                                    <td><strong>9:00 AM - 10:30 AM</strong></td>
                                    <td>Session Q2</td>
                                    <td>Manipulation</td>
                                    <td><span style="background: rgba(255, 215, 0, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px;">Daily Q3 + Session Q2</span></td>
                                    <td>High (Brinks 9:45 AM!)</td>
                                </tr>
                                <tr style="background: rgba(0, 255, 136, 0.12); border: 3px solid var(--accent-green); box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);">
                                    <td><strong>10:30 AM - 12:00 PM</strong></td>
                                    <td>Session Q3</td>
                                    <td>Distribution</td>
                                    <td><span style="background: rgba(0, 255, 136, 0.4); padding: 0.4rem 0.7rem; border-radius: 4px; font-weight: bold; font-size: 1.05rem;">Daily Q3 + Session Q3 = MAXIMUM EDGE ‚≠ê‚≠ê‚≠ê</span></td>
                                    <td><strong style="color: var(--accent-green); font-size: 1.1rem;">HIGHEST!</strong></td>
                                </tr>
                                <tr style="background: rgba(255, 255, 255, 0.02);">
                                    <td><strong>12:00 PM - 1:30 PM</strong></td>
                                    <td>Session Q4</td>
                                    <td>Reversal</td>
                                    <td><span style="background: rgba(255, 87, 34, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px;">Daily Q3 + Session Q4</span></td>
                                    <td>Medium</td>
                                </tr>
                            </table>
                            
                            <div class="alert alert-success" style="margin-top: 1.5rem; background: rgba(0, 255, 136, 0.15); border: 2px solid var(--accent-green);">
                                <h4 style="color: var(--accent-green); margin-bottom: 0.5rem;">üî• CRITICAL INSIGHT:</h4>
                                <p style="margin: 0; line-height: 1.9; font-size: 1.05rem;">
                                    <strong>10:30 AM - 12:00 PM</strong> is when BOTH Daily and Session cycles are in Q3 (Distribution). This is THE window!<br><br>
                                    <strong>Why it matters:</strong> When both timeframes align in Q3 = Real institutional distribution happens. This is NOT manipulation - this is the ACTUAL MOVE.<br><br>
                                    <strong>Win Rate:</strong> 70-80% when all conditions are met (PF marked, EMAs aligned, volume confirms).<br><br>
                                    <strong>Trade Here:</strong> If you only take ONE trade per day, make it during this window!
                                </p>
                            </div>
                            
                            <div style="margin-top: 1rem; padding: 1rem; background: rgba(255, 215, 0, 0.1); border-radius: 8px; border-left: 4px solid var(--accent-yellow);">
                                <strong style="color: var(--accent-yellow);">‚ö° Comparison Example:</strong><br>
                                <span style="color: var(--text-secondary);">
                                    ‚Ä¢ Asian Session: Daily Q1 + Session Q3 = Medium probability (conflicting signals)<br>
                                    ‚Ä¢ London Session: Daily Q2 + Session Q2 = High probability (double manipulation for PF)<br>
                                    ‚Ä¢ <strong style="color: var(--accent-green);">NY Session: Daily Q3 + Session Q3 = MAXIMUM probability (double distribution!)</strong>
                                </span>
                            </div>
                        </div>

                        <h4 style="color: var(--accent-blue); margin-top: 1.5rem;">üìä Alternative Entry: 10:30 AM - 12:00 PM (Session Q3):</h4>
                        <p>If you miss the 9:45 AM window, the 10:30 AM - 12:00 PM period is Session Q3 (still excellent).</p>
                        <table style="margin-top: 1rem; font-size: 0.9rem;">
                            <tr>
                                <th>Time</th>
                                <th>Micro Phase</th>
                                <th>Action</th>
                            </tr>
                            <tr>
                                <td>10:30 - 10:52 AM</td>
                                <td>Q1</td>
                                <td>Pullback entry opportunity</td>
                            </tr>
                            <tr>
                                <td>10:52 - 11:15 AM</td>
                                <td>Q2</td>
                                <td>Minor consolidation</td>
                            </tr>
                            <tr style="background: rgba(0, 255, 136, 0.05);">
                                <td>11:15 - 11:37 AM</td>
                                <td>Q3</td>
                                <td>Trend continuation</td>
                            </tr>
                            <tr>
                                <td>11:37 - 12:00 PM</td>
                                <td>Q4</td>
                                <td>Prepare for lunch hour</td>
                            </tr>
                        </table>
                    </div>

                    <!-- Live Trading Considerations -->
                    <div style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 200, 100, 0.15)); padding: 2rem; border-radius: 12px; margin-top: 2rem; border: 2px solid var(--accent-green);">
                        <h4 style="color: var(--accent-green); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            üóΩ NY Session Live Considerations (PRIMARY WINDOW)
                        </h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-green);">
                                <div style="font-weight: bold; color: var(--accent-green); margin-bottom: 0.5rem;">‚úÖ Entry Checklist</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li>‚òëÔ∏è Trading opposite London direction?</li>
                                    <li>‚òëÔ∏è M/W pattern confirmed?</li>
                                    <li>‚òëÔ∏è EMA alignment (13, 50, 200)?</li>
                                    <li>‚òëÔ∏è At key level (PDH/PDL)?</li>
                                    <li>‚òëÔ∏è Within 9:00-10:30 AM window?</li>
                                </ul>
                            </div>
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-yellow);">
                                <div style="font-weight: bold; color: var(--accent-yellow); margin-bottom: 0.5rem;">üéØ Execution Plan</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li><strong>Entry:</strong> 9:30 or 9:45 AM sweep</li>
                                    <li><strong>Stop:</strong> Beyond PF (20-30 pips)</li>
                                    <li><strong>TP1:</strong> 1:1 RR (scale out 33%)</li>
                                    <li><strong>TP2:</strong> 2:1 RR (scale out 33%)</li>
                                    <li><strong>TP3:</strong> Let runner go to ADR</li>
                                </ul>
                            </div>
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-blue);">
                                <div style="font-weight: bold; color: var(--accent-blue); margin-bottom: 0.5rem;">üíé Masterpiece Setup</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li>Wednesday (Day 3 of BTMM)</li>
                                    <li>9:45 AM Brinks Time entry</li>
                                    <li>Against Monday/Tuesday PF</li>
                                    <li>All EMAs + Pattern + Level align</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TAB 5: PM SESSION -->
                <div id="pm" class="tab-content">
                    <h3>üåÜ NEW YORK PM SESSION (12:00 PM - 6:00 PM EST)</h3>
                    
                    <div class="card" style="border-left: 4px solid var(--accent-red);">
                        <div class="card-title">Daily Q4 - Reversal/Continuation</div>
                        <p><strong>True PM Open:</strong> 1:30 PM EST</p>
                        
                        <h4 style="color: var(--accent-yellow); margin-top: 1rem;">Characteristics:</h4>
                        <ul style="padding-left: 1.5rem; line-height: 1.8;">
                            <li><strong>Lower volume</strong> - Lunch hour + institutions closing</li>
                            <li><strong>Choppy price action</strong> - Consolidation common</li>
                            <li><strong>Reversal potential</strong> - If AM move exhausted</li>
                            <li><strong>Or continuation</strong> - If strong directional momentum</li>
                            <li><strong>Preparing for overnight</strong> - Positions get closed</li>
                        </ul>

                        <h4 style="color: var(--accent-green); margin-top: 1.5rem;">Your Strategy:</h4>
                        <div class="alert alert-warning">
                            <p><strong>TRAIL STOPS or CLOSE POSITIONS</strong></p>
                            <ul style="padding-left: 1.5rem; margin-top: 0.5rem;">
                                <li>‚úÖ Trail stops to breakeven on AM trades</li>
                                <li>‚úÖ Take partial profits if targets hit</li>
                                <li>‚úÖ Avoid new entries unless clear Level 3 setup</li>
                                <li>‚úÖ Watch 2-3 PM for reversal signals</li>
                                <li>‚úÖ Be flat by 4 PM market close (day traders)</li>
                            </ul>
                        </div>

                        <h4 style="margin-top: 1.5rem;">üïê PM Time Windows:</h4>
                        <ul style="padding-left: 1.5rem; line-height: 1.8;">
                            <li><strong>12:00-2:00 PM:</strong> Lunch hour - avoid (choppy)</li>
                            <li><strong>2:00-3:00 PM:</strong> Potential reversal window</li>
                            <li><strong>3:00-4:00 PM:</strong> Final push or consolidation</li>
                            <li><strong>4:00 PM:</strong> Stock market close - volatility spike</li>
                            <li><strong>4:00-5:00 PM:</strong> After hours - thin liquidity</li>
                        </ul>
                    </div>

                    <div class="alert alert-info" style="margin-top: 1.5rem;">
                        <strong>üí° PM Session Rule:</strong> Only trade if you see a clear Level 3 setup with all confirmations. Otherwise, preserve capital and prepare for tomorrow!
                    </div>

                    <!-- Cycle Theory Timing for PM Session -->
                    <h4 style="margin-top: 2rem; color: var(--accent-red);">üîÑ Cycle Theory: PM Session Breakdown</h4>
                    <div class="pattern-card" style="border-left: 4px solid var(--accent-red);">
                        <h4 style="color: var(--accent-red);">Daily Cycle Position:</h4>
                        <p><strong>PM Session = Daily Q4 (Reversal/Continuation Phase)</strong></p>
                        <p>Lower probability window. Manage existing trades, avoid new entries unless setup is pristine.</p>

                        <h4 style="color: var(--accent-yellow); margin-top: 1.5rem;">90-Minute Cycles Within PM:</h4>
                        <div class="quarters-grid" style="margin-top: 1rem;">
                            <div class="quarter-card q1">
                                <div class="quarter-title">1:30 PM - 3:00 PM</div>
                                <div class="quarter-desc">PM Q1<br>True PM Open, consolidation</div>
                            </div>
                            <div class="quarter-card q2">
                                <div class="quarter-title">3:00 PM - 4:30 PM</div>
                                <div class="quarter-desc">PM Q2<br>Final push or reversal</div>
                            </div>
                            <div class="quarter-card q4">
                                <div class="quarter-title">4:30 PM - 6:00 PM</div>
                                <div class="quarter-desc">PM Q3/Q4<br>Close out, prepare for tomorrow</div>
                            </div>
                        </div>

                        <!-- FRACTAL ALIGNMENT TABLE - PM SESSION -->
                        <div style="margin-top: 2rem; padding: 1.5rem; background: linear-gradient(135deg, rgba(255, 87, 34, 0.1), rgba(255, 87, 34, 0.05)); border-radius: 12px; border: 2px solid rgba(255, 87, 34, 0.3);">
                            <h4 style="color: var(--accent-red); margin-bottom: 1rem;">üéØ Multi-Timeframe Alignment - PM Session</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">PM Session is Daily Q4 (Reversal) - lower probability but still tradeable with proper setup:</p>
                            
                            <table style="width: 100%; margin-top: 1rem;">
                                <tr style="background: rgba(255, 87, 34, 0.1);">
                                    <th>Time (EST)</th>
                                    <th>90-Min Quarter</th>
                                    <th>Phase</th>
                                    <th>Daily + Session Alignment</th>
                                    <th>Probability</th>
                                </tr>
                                <tr>
                                    <td><strong>12:00 PM - 1:30 PM</strong></td>
                                    <td>Transition</td>
                                    <td>Lunch Hour</td>
                                    <td><span style="background: rgba(255, 87, 34, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px;">Daily Q4 (Lunch)</span></td>
                                    <td>Low (Avoid)</td>
                                </tr>
                                <tr style="background: rgba(255, 255, 255, 0.02);">
                                    <td><strong>1:30 PM - 3:00 PM</strong></td>
                                    <td>Session Q1</td>
                                    <td>Accumulation</td>
                                    <td><span style="background: rgba(74, 158, 255, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px;">Daily Q4 + Session Q1</span></td>
                                    <td>Low-Medium</td>
                                </tr>
                                <tr>
                                    <td><strong>3:00 PM - 4:30 PM</strong></td>
                                    <td>Session Q2</td>
                                    <td>Manipulation</td>
                                    <td><span style="background: rgba(255, 215, 0, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px;">Daily Q4 + Session Q2</span></td>
                                    <td>Medium (3:45 PM Brinks)</td>
                                </tr>
                                <tr style="background: rgba(255, 255, 255, 0.02);">
                                    <td><strong>4:30 PM - 6:00 PM</strong></td>
                                    <td>Session Q3/Q4</td>
                                    <td>Close Out</td>
                                    <td><span style="background: rgba(255, 87, 34, 0.2); padding: 0.25rem 0.5rem; border-radius: 4px;">Daily Q4 + Session Q3/Q4</span></td>
                                    <td>Low (Close positions)</td>
                                </tr>
                            </table>
                            
                            <div class="alert alert-warning" style="margin-top: 1rem;">
                                <strong>‚ö†Ô∏è Key Insight:</strong> PM Session is Daily Q4 (Reversal phase). Even if Session Q3 occurs (4:30-6 PM), the overall probability is lower because the Daily Cycle is Q4. This is why experienced traders focus on AM sessions and close positions by lunch.
                            </div>
                            
                            <div style="margin-top: 1rem; padding: 1rem; background: rgba(74, 158, 255, 0.1); border-radius: 8px; border-left: 4px solid var(--accent-blue);">
                                <strong style="color: var(--accent-blue);">üí° Comparison to NY AM:</strong><br>
                                <span style="color: var(--text-secondary);">
                                    ‚Ä¢ NY AM (10:30-12): Daily Q3 + Session Q3 = <strong style="color: var(--accent-green);">MAXIMUM (70-80%)</strong><br>
                                    ‚Ä¢ PM (3-4:30): Daily Q4 + Session Q2 = Medium (50-60%)<br>
                                    ‚Ä¢ PM (4:30-6): Daily Q4 + Session Q3 = Medium (50-60%)<br><br>
                                    <strong>Conclusion:</strong> Save your bullets for the AM! PM is for managing trades, not initiating them.
                                </span>
                            </div>
                        </div>

                        <h4 style="color: var(--accent-yellow); margin-top: 1.5rem;">22.5-Minute Micro Quarters (If Trading PM):</h4>
                        <table style="margin-top: 1rem; font-size: 0.9rem;">
                            <tr>
                                <th>Time</th>
                                <th>Phase</th>
                                <th>What's Happening</th>
                            </tr>
                            <tr>
                                <td>1:30 - 1:52 PM</td>
                                <td>Micro Q1</td>
                                <td>Lunch hour - choppy, avoid</td>
                            </tr>
                            <tr>
                                <td>1:52 - 2:15 PM</td>
                                <td>Micro Q2</td>
                                <td>Potential reversal setup</td>
                            </tr>
                            <tr>
                                <td>2:15 - 2:37 PM</td>
                                <td>Micro Q3</td>
                                <td>IF Level 3 setup, enter here</td>
                            </tr>
                            <tr>
                                <td>2:37 - 3:00 PM</td>
                                <td>Micro Q4</td>
                                <td>Manage/trail stops</td>
                            </tr>
                        </table>

                        <div class="alert alert-warning" style="margin-top: 1rem;">
                            <strong>‚ö†Ô∏è PM Session Reality:</strong> Even though PM has its own 90-minute and 22.5-minute cycles, the DAILY Q4 phase means lower probability. Most professional traders close positions by 12-2 PM and prepare for next day. Only trade PM if you have pristine Level 3 setup with all confirmations.
                        </div>
                    </div>

                    <!-- Live Trading Considerations -->
                    <div style="background: linear-gradient(135deg, rgba(255, 152, 0, 0.15), rgba(255, 87, 34, 0.15)); padding: 2rem; border-radius: 12px; margin-top: 2rem; border: 2px solid var(--accent-red);">
                        <h4 style="color: var(--accent-red); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            üåÜ PM Session Live Considerations
                        </h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-green);">
                                <div style="font-weight: bold; color: var(--accent-green); margin-bottom: 0.5rem;">‚úÖ Trade Management</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li>Move stops to breakeven</li>
                                    <li>Trail TP3 runner if still open</li>
                                    <li>Take profits at TP2 if not hit</li>
                                    <li>Close all by 4 PM (day traders)</li>
                                </ul>
                            </div>
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-yellow);">
                                <div style="font-weight: bold; color: var(--accent-yellow); margin-bottom: 0.5rem;">üìä Session Analysis</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li>Did trade hit targets?</li>
                                    <li>Was bias correct?</li>
                                    <li>Pattern played out as expected?</li>
                                    <li>What worked? What didn't?</li>
                                </ul>
                            </div>
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-red);">
                                <div style="font-weight: bold; color: var(--accent-red); margin-bottom: 0.5rem;">‚ö†Ô∏è Avoid These</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li>No revenge trading if stopped out</li>
                                    <li>Don't add to losing positions</li>
                                    <li>Avoid lunch hour chop (12-2 PM)</li>
                                    <li>Don't fight trend exhaustion</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TAB 6: TIMING & BIAS -->
                <div id="timing" class="tab-content">
                    <h3>‚è∞ PRECISE TIMING WINDOWS & BIAS DETERMINATION</h3>
                    
                    <div class="pattern-card">
                        <h4>üéØ Optimal Entry Windows (Brinks Trade Timing):</h4>
                        <table style="margin-top: 1rem;">
                            <tr>
                                <th>Time</th>
                                <th>Window</th>
                                <th>Description</th>
                                <th>Priority</th>
                            </tr>
                            <tr style="background: rgba(0, 255, 136, 0.15); border: 2px solid var(--accent-green);">
                                <td><strong>9:45 AM</strong></td>
                                <td>NY Brinks</td>
                                <td>Highest volume spike of the day</td>
                                <td><strong>‚≠ê‚≠ê‚≠ê #1</strong></td>
                            </tr>
                            <tr style="background: rgba(0, 255, 136, 0.1);">
                                <td><strong>9:30 AM</strong></td>
                                <td>NYSE Open</td>
                                <td>Initial sweep & reversal</td>
                                <td><strong>‚≠ê‚≠ê‚≠ê #2</strong></td>
                            </tr>
                            <tr>
                                <td><strong>9:15 AM</strong></td>
                                <td>915 Rule</td>
                                <td>Multiple TF alignment</td>
                                <td><strong>‚≠ê‚≠ê #3</strong></td>
                            </tr>
                            <tr>
                                <td><strong>3:45 AM</strong></td>
                                <td>London Brinks</td>
                                <td>London PF formation</td>
                                <td><strong>‚≠ê‚≠ê #4</strong></td>
                            </tr>
                            <tr>
                                <td><strong>10:00 AM</strong></td>
                                <td>Top of Hour</td>
                                <td>Session Q3 peak</td>
                                <td><strong>‚≠ê #5</strong></td>
                            </tr>
                        </table>
                    </div>

                    <h4 style="margin-top: 2rem;">üìä Daily Bias Determination Checklist:</h4>
                    <div class="card" style="background: rgba(74, 158, 255, 0.05); border-left: 4px solid var(--accent-blue);">
                        <p><strong>Check These in Order:</strong></p>
                        <ol style="padding-left: 1.5rem; line-height: 1.8;">
                            <li><strong>Higher Timeframe Bias:</strong>
                                <ul style="margin-top: 0.5rem;">
                                    <li>Weekly trend direction?</li>
                                    <li>Above or below weekly/monthly pivots?</li>
                                    <li>Day 1, 2, or 3 of BTMM cycle?</li>
                                </ul>
                            </li>
                            <li><strong>Asian Session:</strong>
                                <ul style="margin-top: 0.5rem;">
                                    <li>Marked Asian High and Low?</li>
                                    <li>Range size (normal, expanded, or tight)?</li>
                                </ul>
                            </li>
                            <li><strong>London Session:</strong>
                                <ul style="margin-top: 0.5rem;">
                                    <li>Did London sweep Asian High or Low?</li>
                                    <li>Where did PF form?</li>
                                    <li>Rejection or continuation?</li>
                                </ul>
                            </li>
                            <li><strong>Key Levels:</strong>
                                <ul style="margin-top: 0.5rem;">
                                    <li>PDH, PDL, PWH, PWL positions?</li>
                                    <li>EMA alignment (13, 50, 200)?</li>
                                    <li>Major S/R zones nearby?</li>
                                </ul>
                            </li>
                            <li><strong>News Events:</strong>
                                <ul style="margin-top: 0.5rem;">
                                    <li>Any high-impact news today?</li>
                                    <li>NFP, CPI, FOMC, Jobless Claims?</li>
                                    <li>‚Üí If yes, stay flat 30 min before/after</li>
                                </ul>
                            </li>
                        </ol>
                    </div>

                    <div class="alert alert-success" style="margin-top: 1.5rem;">
                        <strong>‚úÖ If All Align:</strong> You have a Level 3 setup (EMA + Pattern + Timing + Key Level). Take the trade with confidence!
                    </div>

                    <div class="alert alert-danger" style="margin-top: 1rem;">
                        <strong>‚ö†Ô∏è If Conflicting Signals:</strong> Stay flat! Don't force trades. There's always tomorrow.
                    </div>

                    <!-- Live Trading Considerations -->
                    <div style="background: linear-gradient(135deg, rgba(138, 43, 226, 0.15), rgba(156, 39, 176, 0.15)); padding: 2rem; border-radius: 12px; margin-top: 2rem; border: 2px solid #8b2be2;">
                        <h4 style="color: #8b2be2; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            ‚è∞ Pre-Trade Timing & Bias Live Checklist
                        </h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-green);">
                                <div style="font-weight: bold; color: var(--accent-green); margin-bottom: 0.5rem;">‚úÖ Before Entry (30 sec)</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li>‚òëÔ∏è HOD/LOD locked in?</li>
                                    <li>‚òëÔ∏è Which Brinks window am I in?</li>
                                    <li>‚òëÔ∏è EMA alignment confirmed?</li>
                                    <li>‚òëÔ∏è News event coming up?</li>
                                    <li>‚òëÔ∏è Risk calculated (1-2%)?</li>
                                </ul>
                            </div>
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-yellow);">
                                <div style="font-weight: bold; color: var(--accent-yellow); margin-bottom: 0.5rem;">üéØ Optimal Windows</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li><strong>9:45 AM:</strong> Best entry (‚≠ê‚≠ê‚≠ê)</li>
                                    <li><strong>9:30 AM:</strong> NYSE open (‚≠ê‚≠ê‚≠ê)</li>
                                    <li><strong>9:15 AM:</strong> Multi-TF (‚≠ê‚≠ê)</li>
                                    <li><strong>3:45 AM:</strong> London PF (‚≠ê‚≠ê)</li>
                                </ul>
                            </div>
                            <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-red);">
                                <div style="font-weight: bold; color: var(--accent-red); margin-bottom: 0.5rem;">üö´ DO NOT Trade If...</div>
                                <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                                    <li>Bias is unclear or conflicting</li>
                                    <li>Hour before True Open (stop hunt)</li>
                                    <li>High-impact news in 30 minutes</li>
                                    <li>Choppy price action (Level II)</li>
                                </ul>
                            </div>
                        </div>
                        <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; margin-top: 1rem; text-align: center;">
                            <p style="margin: 0; color: var(--accent-green); font-weight: bold; font-size: 1.1rem;">
                                üíé "When all factors align, take the trade with confidence. When they don't, preservation of capital is the trade."
                            </p>
                        </div>
                    </div>
                </div>

            </section>
        </main>
    </div>

    <script src="../js/zoom-sync.js"></script>`n    <script src="../js/zoom-controls.js"></script>
    <script src="../js/error-handler.js"></script>
    <script src="../js/navigation.js"></script>
    <script src="../js/main.js"></script>
    <script>
        // Tab functionality
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                const tab = button.dataset.tab;
                document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                button.classList.add('active');
                document.getElementById(tab)?.classList.add('active');
            });
        });

        // LIVE: Highlight current session
        function highlightCurrentSession() {
            const now = new Date();
            // Get hour in EST - FIXED
            const estTimeString = now.toLocaleString('en-US', { 
                timeZone: 'America/New_York',
                hour12: false,
                hour: '2-digit'
            });
            const hours = parseInt(estTimeString.split(':')[0]);
            let currentSession = '';
            
            if (hours >= 19 || hours < 2) {
                currentSession = 'asian';
            } else if (hours >= 2 && hours < 9) {
                currentSession = 'london';
            } else if (hours >= 9 && hours < 17) {
                currentSession = 'ny';
            } else {
                currentSession = 'pm';
            }
            
            const sessionTab = document.querySelector(`[data-tab="${currentSession}"]`);
            if (sessionTab && !sessionTab.textContent.includes('üî¥')) {
                sessionTab.style.background = 'linear-gradient(135deg, rgba(255, 0, 0, 0.2), rgba(255, 87, 34, 0.2))';
                sessionTab.style.border = '2px solid #ff0000';
                sessionTab.style.fontWeight = 'bold';
                const liveDot = document.createElement('span');
                liveDot.textContent = ' üî¥ LIVE';
                liveDot.style.animation = 'pulse 2s infinite';
                sessionTab.appendChild(liveDot);
            }
        }
        
        highlightCurrentSession();
        setInterval(highlightCurrentSession, 60000);

        // LIVE MULTI-TIMEFRAME CYCLE POSITION TRACKER
        function updateCyclePosition() {
            const now = new Date();
            
            // Get EST time properly - FIXED
            const estTimeString = now.toLocaleString('en-US', { 
                timeZone: 'America/New_York',
                hour12: false,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            const [hours, minutes, seconds] = estTimeString.split(':').map(Number);
            
            // Get EST date properly
            const estDateString = now.toLocaleString('en-US', { 
                timeZone: 'America/New_York',
                year: 'numeric',
                month: '2-digit',
                day: '2-digit'
            });
            const [month, dayOfMonth, year] = estDateString.split('/').map(Number);
            
            // Get day of week in EST
            const estDayString = now.toLocaleDateString('en-US', { timeZone: 'America/New_York', weekday: 'long' });
            const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const dayOfWeek = dayNames.indexOf(estDayString);
            
            // Determine cycles
            let yearlyQ = (month - 1) <= 2 ? 'Q1' : (month - 1) <= 5 ? 'Q2' : (month - 1) <= 8 ? 'Q3' : 'Q4'; // month is 1-12, need 0-11
            let monthlyWeek = dayOfMonth <= 7 ? 'Week 1' : dayOfMonth <= 14 ? 'Week 2' : dayOfMonth <= 21 ? 'Week 3' : 'Week 4';
            const dayNamesShort = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            let weeklyDay = dayNamesShort[dayOfWeek];
            let session = hours >= 19 || hours < 2 ? 'Asian' : hours < 9 ? 'London' : hours < 17 ? 'NY' : 'PM';
            
            // Calculate trade quality (0-5 scale)
            let quality = 0;
            let reasons = [];
            
            if (yearlyQ === 'Q3') { quality++; reasons.push('Yearly Q3 ‚≠ê'); }
            if (monthlyWeek === 'Week 3') { quality++; reasons.push('Monthly Week 3 ‚≠ê'); }
            if (weeklyDay === 'Wed') { quality++; reasons.push('Wednesday ‚≠ê'); }
            if (session === 'NY' && hours >= 9 && hours < 12) { quality += 2; reasons.push('NY AM Session Q3 ‚≠ê‚≠ê'); }
            else if (session === 'NY') { quality++; reasons.push('NY Session ‚≠ê'); }
            
            // Update banner
            const positionText = `${yearlyQ} ‚Ä¢ ${monthlyWeek} ‚Ä¢ ${weeklyDay} ‚Ä¢ ${session} Session`;
            document.getElementById('cyclePositionText').textContent = positionText;
            
            // Quality indicator
            const qualityEl = document.getElementById('tradeQualityIndicator');
            const qualityTextEl = document.getElementById('tradeQualityText');
            
            if (quality >= 4) {
                qualityEl.style.background = 'linear-gradient(135deg, rgba(0, 255, 136, 0.3), rgba(0, 255, 136, 0.1))';
                qualityEl.style.border = '2px solid var(--accent-green)';
                qualityTextEl.textContent = 'MAXIMUM ‚≠ê‚≠ê‚≠ê';
                qualityTextEl.style.color = 'var(--accent-green)';
            } else if (quality === 3) {
                qualityEl.style.background = 'linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 255, 136, 0.05))';
                qualityEl.style.border = '2px solid var(--accent-green)';
                qualityTextEl.textContent = 'HIGH ‚≠ê‚≠ê';
                qualityTextEl.style.color = 'var(--accent-green)';
            } else if (quality === 2) {
                qualityEl.style.background = 'linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 215, 0, 0.05))';
                qualityEl.style.border = '2px solid var(--accent-yellow)';
                qualityTextEl.textContent = 'MEDIUM ‚≠ê';
                qualityTextEl.style.color = 'var(--accent-yellow)';
            } else {
                qualityEl.style.background = 'linear-gradient(135deg, rgba(255, 87, 34, 0.2), rgba(255, 87, 34, 0.05))';
                qualityEl.style.border = '2px solid var(--accent-red)';
                qualityTextEl.textContent = 'LOW';
                qualityTextEl.style.color = 'var(--accent-red)';
            }
            
            // Details
            const detailsEl = document.getElementById('cycleDetails');
            if (reasons.length > 0) {
                detailsEl.innerHTML = `<strong>‚úÖ Active Alignments:</strong> ${reasons.join(' ‚Ä¢ ')}`;
            } else {
                detailsEl.innerHTML = `<strong>‚ö†Ô∏è No major alignments active.</strong> Consider waiting for higher probability windows.`;
            }
            
            // Next optimal time
            const nextOptimalEl = document.getElementById('nextOptimalTime');
            if (weeklyDay === 'Wed' && hours >= 9 && hours < 12) {
                nextOptimalEl.textContent = 'RIGHT NOW! üî•';
                nextOptimalEl.style.color = 'var(--accent-green)';
            } else if (weeklyDay === 'Wed') {
                nextOptimalEl.textContent = 'Today 10:30 AM';
                nextOptimalEl.style.color = 'var(--accent-green)';
            } else if (weeklyDay === 'Tue') {
                nextOptimalEl.textContent = 'Tomorrow (Wed)';
                nextOptimalEl.style.color = 'var(--accent-yellow)';
            } else if (weeklyDay === 'Thu') {
                nextOptimalEl.textContent = 'Next Wednesday';
                nextOptimalEl.style.color = 'var(--accent-yellow)';
            } else {
                nextOptimalEl.textContent = 'Next Wednesday 10:30 AM';
                nextOptimalEl.style.color = 'var(--text-secondary)';
            }
            
            // TRADING PHASES TIMELINE
            updateTradingPhasesTimeline(hours, weeklyDay);
        }
        
        function updateTradingPhasesTimeline(currentHour, currentDay) {
            const timelineEl = document.getElementById('tradingPhasesTimeline');
            if (!timelineEl) return;
            
            let phases = [];
            
            // Determine next Consolidation (Asian Session - 7 PM)
            let nextConsolidation = '';
            let consolidationStatus = '';
            if (currentHour >= 19 || currentHour < 2) {
                nextConsolidation = 'NOW - Asian Session';
                consolidationStatus = 'active';
            } else if (currentHour >= 2 && currentHour < 19) {
                const hoursUntil = 19 - currentHour;
                nextConsolidation = `In ${hoursUntil}h - Tonight 7 PM`;
                consolidationStatus = 'upcoming';
            }
            
            // Determine next PF (London Session - 3-4:30 AM)
            let nextPF = '';
            let pfStatus = '';
            if (currentHour >= 3 && currentHour < 5) {
                nextPF = 'NOW - London PF Window';
                pfStatus = 'active';
            } else if (currentHour < 3) {
                const hoursUntil = 3 - currentHour;
                nextPF = `In ${hoursUntil}h - Tonight 3 AM`;
                pfStatus = 'upcoming';
            } else {
                nextPF = 'Tomorrow 3-4:30 AM';
                pfStatus = 'future';
            }
            
            // Determine next Distribution (NY AM - 9-10:30 AM on Wednesday)
            let nextDistribution = '';
            let distributionStatus = '';
            if (currentDay === 'Wed' && currentHour >= 9 && currentHour < 12) {
                nextDistribution = 'NOW - NY Q3! üî•';
                distributionStatus = 'active';
            } else if (currentDay === 'Wed' && currentHour < 9) {
                const hoursUntil = 9 - currentHour;
                nextDistribution = `In ${hoursUntil}h - Today 9 AM`;
                distributionStatus = 'upcoming';
            } else if (currentDay === 'Tue') {
                nextDistribution = 'Tomorrow 9-10:30 AM ‚≠ê';
                distributionStatus = 'upcoming';
            } else if (currentDay === 'Thu') {
                nextDistribution = 'Next Wed 9-10:30 AM';
                distributionStatus = 'future';
            } else {
                nextDistribution = 'Next Wed 9-10:30 AM';
                distributionStatus = 'future';
            }
            
            // Build HTML
            timelineEl.innerHTML = `
                <div style="background: ${consolidationStatus === 'active' ? 'rgba(74, 158, 255, 0.2)' : 'rgba(74, 158, 255, 0.1)'}; padding: 0.75rem; border-radius: 8px; border-left: 4px solid var(--accent-blue);">
                    <div style="font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 0.25rem;">üìä CONSOLIDATION (Q1)</div>
                    <div style="font-size: 0.95rem; font-weight: bold; color: var(--accent-blue);">${nextConsolidation}</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.25rem;">Asian Session - Mark levels</div>
                </div>
                
                <div style="background: ${pfStatus === 'active' ? 'rgba(255, 215, 0, 0.2)' : 'rgba(255, 215, 0, 0.1)'}; padding: 0.75rem; border-radius: 8px; border-left: 4px solid var(--accent-yellow);">
                    <div style="font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 0.25rem;">‚ö° PF WINDOW (Q2)</div>
                    <div style="font-size: 0.95rem; font-weight: bold; color: var(--accent-yellow);">${nextPF}</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.25rem;">London 3-4:30 AM - Peak Formation</div>
                </div>
                
                <div style="background: ${distributionStatus === 'active' ? 'rgba(0, 255, 136, 0.2)' : 'rgba(0, 255, 136, 0.1)'}; padding: 0.75rem; border-radius: 8px; border-left: 4px solid var(--accent-green); ${distributionStatus === 'active' ? 'border: 2px solid var(--accent-green); animation: pulse 2s infinite;' : ''}">
                    <div style="font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 0.25rem;">üî• DISTRIBUTION (Q3)</div>
                    <div style="font-size: 0.95rem; font-weight: bold; color: var(--accent-green);">${nextDistribution}</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.25rem;">Wed NY AM - BEST WINDOW</div>
                </div>
            `;
        }
        
        updateCyclePosition();
        setInterval(updateCyclePosition, 5000); // Update every 5 seconds
        
        // LIVE CYCLE OVERVIEW CARDS
        function updateLiveCycleOverview() {
            const container = document.getElementById('live-cycle-overview');
            if (!container) return;
            
            const now = new Date();
            const estTimeString = now.toLocaleString('en-US', { 
                timeZone: 'America/New_York',
                hour12: false,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            const [hours, minutes, seconds] = estTimeString.split(':').map(Number);
            const totalMinutes = hours * 60 + minutes + (seconds / 60);
            
            // Determine current session
            let sessionName = '';
            let sessionStart = 0;
            let sessionDuration = 0;
            let sessionColor = '';
            let sessionBorder = '';
            
            if (totalMinutes >= 19 * 60 || totalMinutes < 2 * 60) {
                sessionName = 'Asian Session';
                sessionStart = 19 * 60;
                sessionDuration = 7 * 60;
                sessionColor = 'rgba(74, 158, 255, 0.1)';
                sessionBorder = 'var(--accent-blue)';
            } else if (totalMinutes >= 2 * 60 && totalMinutes < 9 * 60) {
                sessionName = 'London Session';
                sessionStart = 2 * 60;
                sessionDuration = 7 * 60;
                sessionColor = 'rgba(255, 215, 0, 0.1)';
                sessionBorder = 'var(--accent-yellow)';
            } else if (totalMinutes >= 9 * 60 && totalMinutes < 12 * 60) {
                sessionName = 'NY Session';
                sessionStart = 9 * 60;
                sessionDuration = 3 * 60;
                sessionColor = 'rgba(0, 255, 136, 0.1)';
                sessionBorder = 'var(--accent-green)';
            } else {
                sessionName = 'PM Session';
                sessionStart = 12 * 60;
                sessionDuration = 7 * 60;
                sessionColor = 'rgba(255, 152, 0, 0.1)';
                sessionBorder = 'var(--accent-red)';
            }
            
            // Calculate time since session start
            let minutesSinceStart = totalMinutes >= sessionStart 
                ? totalMinutes - sessionStart 
                : (24 * 60 - sessionStart) + totalMinutes;
            
            // Daily cycle progress and time left
            let dailyProgress = Math.min((minutesSinceStart / sessionDuration) * 100, 100);
            let dailyTimeLeft = sessionDuration - minutesSinceStart;
            
            // 90-min cycle
            let cycleNumber = Math.floor(minutesSinceStart / 90);
            let minuteInCycle = minutesSinceStart % 90;
            let ninetyMinProgress = (minuteInCycle / 90) * 100;
            let ninetyMinTimeLeft = 90 - minuteInCycle;
            
            let quarter90 = '';
            if (minuteInCycle < 22.5) quarter90 = 'Q1';
            else if (minuteInCycle < 45) quarter90 = 'Q2';
            else if (minuteInCycle < 67.5) quarter90 = 'Q3';
            else quarter90 = 'Q4';
            
            // Micro cycle (22.5 min quarters)
            let microQuarter = '';
            let microProgress = 0;
            let microTimeLeft = 0;
            
            if (minuteInCycle < 22.5) {
                microQuarter = 'Q1 - Accumulation';
                microProgress = (minuteInCycle / 22.5) * 100;
                microTimeLeft = 22.5 - minuteInCycle;
            } else if (minuteInCycle < 45) {
                microQuarter = 'Q2 - Manipulation';
                microProgress = ((minuteInCycle - 22.5) / 22.5) * 100;
                microTimeLeft = 45 - minuteInCycle;
            } else if (minuteInCycle < 67.5) {
                microQuarter = 'Q3 - Distribution';
                microProgress = ((minuteInCycle - 45) / 22.5) * 100;
                microTimeLeft = 67.5 - minuteInCycle;
            } else {
                microQuarter = 'Q4 - Reversal';
                microProgress = ((minuteInCycle - 67.5) / 22.5) * 100;
                microTimeLeft = 90 - minuteInCycle;
            }
            
            // Format time remaining
            function formatTime(mins) {
                if (mins < 0) return '0:00';
                const hrs = Math.floor(mins / 60);
                const min = Math.floor(mins % 60);
                const sec = Math.floor((mins % 1) * 60);
                
                if (hrs > 0) {
                    return `${hrs}h ${min}m`;
                } else {
                    return `${min}:${String(sec).padStart(2, '0')}`;
                }
            }
            
            // Get explanations for current cycles
            let dailyExplanation = '';
            let ninetyMinExplanation = '';
            let microExplanation = '';
            
            // Daily Cycle Explanations
            if (sessionName === 'Asian Session') {
                dailyExplanation = '<strong>Accumulation Phase:</strong> Market makers are positioning. Price consolidates in a tight range. Mark Asian High/Low - these levels will be swept by London.';
            } else if (sessionName === 'London Session') {
                dailyExplanation = '<strong>Manipulation Phase:</strong> Stop hunts occur! London sweeps Asian range to grab liquidity. Watch for Peak Formation (PF) - the extreme high or low that NY will reverse.';
            } else if (sessionName === 'NY Session') {
                dailyExplanation = '<strong>Distribution Phase:</strong> The REAL move happens! NY reverses London direction 70%+ of the time. This is your prime trading window - highest probability setups.';
            } else {
                dailyExplanation = '<strong>Reversal/Continuation:</strong> Daily cycle completes. Trail stops on AM trades. Avoid new entries unless pristine Level 3 setup. Prepare for next day.';
            }
            
            // 90-Min Cycle Explanations
            if (quarter90 === 'Q1') {
                ninetyMinExplanation = '<strong>Accumulation (Q1):</strong> Setup phase within the session. Price consolidates before the next move. Watch for range formation and mark key levels.';
            } else if (quarter90 === 'Q2') {
                ninetyMinExplanation = '<strong>Manipulation (Q2):</strong> Stop hunt window! Price sweeps liquidity. If in NY session 9-10:30 AM, this is PRIME TIME for entries at 9:45 AM Brinks Time.';
            } else if (quarter90 === 'Q3') {
                ninetyMinExplanation = '<strong>Distribution (Q3):</strong> The real move executes! Highest probability for trend continuation. If in NY session, this is the sweet spot for maximum edge.';
            } else {
                ninetyMinExplanation = '<strong>Reversal (Q4):</strong> Cycle completes. Price may reverse or consolidate. Trail stops, take profits, prepare for next 90-min cycle.';
            }
            
            // Micro Cycle Explanations
            if (microQuarter.includes('Accumulation')) {
                microExplanation = '<strong>Micro Accumulation:</strong> 22.5-minute setup phase. Price consolidates within the 90-min cycle. Wait for manipulation phase before entering.';
            } else if (microQuarter.includes('Manipulation')) {
                microExplanation = '<strong>Micro Manipulation:</strong> Precision entry window! If in NY 9:22-9:45 AM, this includes 9:30 NYSE Open and 9:45 Brinks Time - ENTER HERE on sweep rejection!';
            } else if (microQuarter.includes('Distribution')) {
                microExplanation = '<strong>Micro Distribution:</strong> The move happens NOW! If you entered at manipulation, watch for TP1. This 22.5-min window has maximum momentum.';
            } else {
                microExplanation = '<strong>Micro Reversal:</strong> Quarter completes. Trail stops to breakeven. Prepare for next micro quarter or take profits if targets hit.';
            }
            
            container.innerHTML = `
                <!-- Daily Cycle Explanation -->
                <div style="background: linear-gradient(135deg, ${sessionColor}, rgba(0, 0, 0, 0.05)); padding: 1.25rem; border-radius: 8px; border: 2px solid ${sessionBorder};">
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;">
                        <div style="font-size: 0.85rem; color: var(--text-secondary); font-weight: bold;">üåç DAILY CYCLE</div>
                        <div style="font-size: 0.75rem; padding: 0.2rem 0.5rem; background: ${sessionColor}; border-radius: 4px; color: ${sessionBorder}; font-weight: bold;">Q${sessionName === 'Asian Session' ? '1' : sessionName === 'London Session' ? '2' : sessionName === 'NY Session' ? '3' : '4'}</div>
                        <div style="margin-left: auto; font-size: 0.8rem; color: ${sessionBorder}; font-weight: bold;">${formatTime(dailyTimeLeft)} left</div>
                    </div>
                    <div style="font-weight: bold; color: ${sessionBorder}; font-size: 1.1rem; margin-bottom: 0.5rem;">${sessionName}</div>
                    <div style="font-size: 0.9rem; line-height: 1.6; color: var(--text-primary);">${dailyExplanation}</div>
                </div>
                
                <!-- 90-Min Cycle Explanation -->
                <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05)); padding: 1.25rem; border-radius: 8px; border: 2px solid var(--accent-yellow);">
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;">
                        <div style="font-size: 0.85rem; color: var(--text-secondary); font-weight: bold;">‚è±Ô∏è 90-MIN CYCLE</div>
                        <div style="font-size: 0.75rem; padding: 0.2rem 0.5rem; background: rgba(255, 215, 0, 0.25); border-radius: 4px; color: var(--accent-yellow); font-weight: bold;">${quarter90}</div>
                        <div style="margin-left: auto; font-size: 0.8rem; color: var(--accent-yellow); font-weight: bold;">${formatTime(ninetyMinTimeLeft)} left</div>
                    </div>
                    <div style="font-weight: bold; color: var(--accent-yellow); font-size: 1.1rem; margin-bottom: 0.5rem;">Cycle ${cycleNumber + 1} - ${quarter90}</div>
                    <div style="font-size: 0.9rem; line-height: 1.6; color: var(--text-primary);">${ninetyMinExplanation}</div>
                </div>
                
                <!-- Micro Cycle Explanation -->
                <div style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(0, 255, 136, 0.05)); padding: 1.25rem; border-radius: 8px; border: 2px solid var(--accent-green);">
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;">
                        <div style="font-size: 0.85rem; color: var(--text-secondary); font-weight: bold;">‚ö° MICRO (22.5min)</div>
                        <div style="font-size: 0.75rem; padding: 0.2rem 0.5rem; background: rgba(0, 255, 136, 0.25); border-radius: 4px; color: var(--accent-green); font-weight: bold;">${quarter90}</div>
                        <div style="margin-left: auto; font-size: 0.8rem; color: var(--accent-green); font-weight: bold;">${formatTime(microTimeLeft)} left</div>
                    </div>
                    <div style="font-weight: bold; color: var(--accent-green); font-size: 1.1rem; margin-bottom: 0.5rem;">${microQuarter}</div>
                    <div style="font-size: 0.9rem; line-height: 1.6; color: var(--text-primary);">${microExplanation}</div>
                </div>
            `;
        }
        
        // Initialize and update every second
        updateLiveCycleOverview();
        setInterval(updateLiveCycleOverview, 1000);
        
        // HIGHLIGHT CURRENT SESSION IN TABLE
        function highlightCurrentSession() {
            const now = new Date();
            const estTimeString = now.toLocaleString('en-US', { 
                timeZone: 'America/New_York',
                hour12: false,
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const [hours, minutes] = estTimeString.split(':').map(Number);
            const totalMinutes = hours * 60 + minutes;
            
            // Remove all existing highlights
            const allRows = document.querySelectorAll('#sessionScheduleTable tr[data-session]');
            allRows.forEach(row => {
                row.style.background = '';
                row.style.border = '';
                row.style.boxShadow = '';
                row.style.position = '';
                // Remove LIVE indicator if exists
                const liveIndicator = row.querySelector('.live-indicator');
                if (liveIndicator) {
                    liveIndicator.remove();
                }
            });
            
            // Find and highlight current session
            allRows.forEach(row => {
                const start = parseInt(row.getAttribute('data-start'));
                const end = parseInt(row.getAttribute('data-end'));
                
                let isActive = false;
                
                // Handle sessions that cross midnight
                if (start > end) {
                    isActive = totalMinutes >= start || totalMinutes < end;
                } else {
                    isActive = totalMinutes >= start && totalMinutes < end;
                }
                
                if (isActive) {
                    const session = row.getAttribute('data-session');
                    let bgColor = '';
                    let borderColor = '';
                    
                    if (session === 'asian') {
                        bgColor = 'rgba(74, 158, 255, 0.2)';
                        borderColor = 'var(--accent-blue)';
                    } else if (session === 'london') {
                        bgColor = 'rgba(255, 215, 0, 0.2)';
                        borderColor = 'var(--accent-yellow)';
                    } else if (session === 'ny-prime') {
                        bgColor = 'rgba(0, 255, 136, 0.25)';
                        borderColor = 'var(--accent-green)';
                    } else if (session === 'ny-pm') {
                        bgColor = 'rgba(255, 152, 0, 0.2)';
                        borderColor = 'var(--accent-red)';
                    }
                    
                    row.style.background = bgColor;
                    row.style.border = `3px solid ${borderColor}`;
                    row.style.boxShadow = `0 0 20px ${bgColor}`;
                    row.style.position = 'relative';
                    
                    // Add LIVE indicator
                    const firstCell = row.querySelector('td:first-child');
                    if (firstCell && !firstCell.querySelector('.live-indicator')) {
                        const liveIndicator = document.createElement('span');
                        liveIndicator.className = 'live-indicator';
                        liveIndicator.innerHTML = ' <span style="display: inline-block; width: 10px; height: 10px; background: #ff0000; border-radius: 50%; animation: pulse 2s infinite; margin-left: 8px;"></span> <strong style="color: #ff0000;">LIVE NOW</strong>';
                        firstCell.appendChild(liveIndicator);
                    }
                }
            });
        }
        
        // Update every second
        highlightCurrentSession();
        setInterval(highlightCurrentSession, 1000);
        
        // HIGHLIGHT CURRENT SESSION FLOW STEP
        function highlightSessionFlow() {
            const now = new Date();
            const estTimeString = now.toLocaleString('en-US', { 
                timeZone: 'America/New_York',
                hour12: false,
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const [hours, minutes] = estTimeString.split(':').map(Number);
            const totalMinutes = hours * 60 + minutes;
            
            // Remove all existing highlights
            const allFlowItems = document.querySelectorAll('#sessionFlowList li[data-flow]');
            allFlowItems.forEach(item => {
                item.style.background = '';
                item.style.border = '';
                item.style.padding = '';
                item.style.borderRadius = '';
                item.style.marginBottom = '';
                item.style.boxShadow = '';
                // Remove timing info if exists
                const timingInfo = item.querySelector('.flow-timing-info');
                if (timingInfo) {
                    timingInfo.remove();
                }
            });
            
            // Find and highlight current flow step
            allFlowItems.forEach(item => {
                const start = parseInt(item.getAttribute('data-start'));
                const end = parseInt(item.getAttribute('data-end'));
                
                let isActive = false;
                
                // Handle sessions that cross midnight
                if (start > end) {
                    isActive = totalMinutes >= start || totalMinutes < end;
                } else {
                    isActive = totalMinutes >= start && totalMinutes < end;
                }
                
                if (isActive) {
                    const flow = item.getAttribute('data-flow');
                    let bgColor = '';
                    let borderColor = '';
                    
                    if (flow === 'asian') {
                        bgColor = 'rgba(74, 158, 255, 0.15)';
                        borderColor = 'var(--accent-blue)';
                    } else if (flow === 'london') {
                        bgColor = 'rgba(255, 215, 0, 0.15)';
                        borderColor = 'var(--accent-yellow)';
                    } else if (flow === 'ny') {
                        bgColor = 'rgba(0, 255, 136, 0.15)';
                        borderColor = 'var(--accent-green)';
                    } else if (flow === 'pm') {
                        bgColor = 'rgba(255, 152, 0, 0.15)';
                        borderColor = 'var(--accent-red)';
                    }
                    
                    item.style.background = bgColor;
                    item.style.borderLeft = `5px solid ${borderColor}`;
                    item.style.padding = '15px';
                    item.style.borderRadius = '8px';
                    item.style.marginBottom = '10px';
                    item.style.boxShadow = `0 0 15px ${bgColor}`;
                    
                    // Calculate time remaining
                    let timeRemaining = 0;
                    if (start > end) {
                        // Crosses midnight
                        if (totalMinutes >= start) {
                            timeRemaining = (24 * 60 - totalMinutes) + end;
                        } else {
                            timeRemaining = end - totalMinutes;
                        }
                    } else {
                        timeRemaining = end - totalMinutes;
                    }
                    
                    const hoursLeft = Math.floor(timeRemaining / 60);
                    const minutesLeft = Math.floor(timeRemaining % 60);
                    
                    let timeLeftText = '';
                    if (hoursLeft > 0) {
                        timeLeftText = `${hoursLeft}h ${minutesLeft}m remaining`;
                    } else {
                        timeLeftText = `${minutesLeft}m remaining`;
                    }
                    
                    // Calculate progress percentage
                    let sessionDuration = 0;
                    if (start > end) {
                        sessionDuration = (24 * 60 - start) + end;
                    } else {
                        sessionDuration = end - start;
                    }
                    
                    let elapsed = 0;
                    if (start > end) {
                        if (totalMinutes >= start) {
                            elapsed = totalMinutes - start;
                        } else {
                            elapsed = (24 * 60 - start) + totalMinutes;
                        }
                    } else {
                        elapsed = totalMinutes - start;
                    }
                    
                    const progressPercent = Math.min(Math.round((elapsed / sessionDuration) * 100), 100);
                    
                    // Add timing info
                    const timingInfo = document.createElement('div');
                    timingInfo.className = 'flow-timing-info';
                    timingInfo.innerHTML = `
                        <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid ${borderColor};">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <span style="font-size: 0.85rem; color: var(--text-secondary);">
                                    <strong style="color: #ff0000;">üî¥ ACTIVE NOW</strong> - ${progressPercent}% complete
                                </span>
                                <span style="font-size: 0.85rem; font-weight: bold; color: ${borderColor};">
                                    ${timeLeftText}
                                </span>
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.2); height: 8px; border-radius: 4px; overflow: hidden;">
                                <div style="background: ${borderColor}; height: 100%; width: ${progressPercent}%; transition: width 1s;"></div>
                            </div>
                        </div>
                    `;
                    item.appendChild(timingInfo);
                }
            });
        }
        
        // Update every second
        highlightSessionFlow();
        setInterval(highlightSessionFlow, 1000);
        
        // UPDATE LIVE TRADING CONSIDERATIONS
        function updateLiveConsiderations() {
            const container = document.querySelector('#liveConsiderationsOverview > div');
            if (!container) return;
            
            const now = new Date();
            const estTimeString = now.toLocaleString('en-US', { 
                timeZone: 'America/New_York',
                hour12: false,
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const [hours, minutes] = estTimeString.split(':').map(Number);
            const totalMinutes = hours * 60 + minutes;
            
            // Determine current session and next session
            let currentSession = '';
            let nextSession = '';
            let timeToNext = 0;
            let isKeyWindow = false;
            let keyWindowText = '';
            
            if (totalMinutes >= 19 * 60 || totalMinutes < 2 * 60) {
                currentSession = 'Asian Session (Q1 Accumulation)';
                nextSession = 'London Session';
                if (totalMinutes >= 19 * 60) {
                    timeToNext = (24 * 60 - totalMinutes) + (2 * 60);
                } else {
                    timeToNext = (2 * 60) - totalMinutes;
                }
            } else if (totalMinutes >= 2 * 60 && totalMinutes < 9 * 60) {
                currentSession = 'London Session (Q2 Manipulation)';
                nextSession = 'NY Session';
                timeToNext = (9 * 60) - totalMinutes;
                if (totalMinutes >= 3 * 60 && totalMinutes < 4.5 * 60) {
                    isKeyWindow = true;
                    keyWindowText = 'üî• IN PF WINDOW (3:00-4:30 AM)';
                }
            } else if (totalMinutes >= 9 * 60 && totalMinutes < 12 * 60) {
                currentSession = 'NY Session (Q3 Distribution)';
                nextSession = 'PM Session';
                timeToNext = (12 * 60) - totalMinutes;
                if (totalMinutes >= 9 * 60 && totalMinutes < 10.5 * 60) {
                    isKeyWindow = true;
                    keyWindowText = 'üî• IN BEST WINDOW (9:00-10:30 AM) - PRIME TIME!';
                }
            } else {
                currentSession = 'PM Session (Q4 Reversal)';
                nextSession = 'Asian Session (Tomorrow)';
                timeToNext = (19 * 60) - totalMinutes;
            }
            
            const hoursToNext = Math.floor(timeToNext / 60);
            const minutesToNext = Math.floor(timeToNext % 60);
            let timeToNextText = hoursToNext > 0 ? `${hoursToNext}h ${minutesToNext}m` : `${minutesToNext}m`;
            
            // Check if near Brinks Times
            let brinksSoon = '';
            const timeUntil945 = (9 * 60 + 45) - totalMinutes;
            const timeUntil345 = (3 * 60 + 45) - totalMinutes;
            
            if (timeUntil945 > 0 && timeUntil945 <= 30) {
                brinksSoon = `‚ö° 9:45 AM Brinks Time in ${timeUntil945}m`;
            } else if (timeUntil345 > 0 && timeUntil345 <= 30) {
                brinksSoon = `‚ö° 3:45 AM Brinks Time in ${timeUntil345}m`;
            }
            
            // Check if near True Opens
            let trueOpenSoon = '';
            const timeUntilLondonOpen = (1.5 * 60) - totalMinutes;
            const timeUntilNYOpen = (7.5 * 60) - totalMinutes;
            
            if (timeUntilLondonOpen > 0 && timeUntilLondonOpen <= 60) {
                trueOpenSoon = '‚ö†Ô∏è AVOID: Less than 1 hour until London True Open (1:30 AM)';
            } else if (timeUntilNYOpen > 0 && timeUntilNYOpen <= 60) {
                trueOpenSoon = '‚ö†Ô∏è AVOID: Less than 1 hour until NY True Open (7:30 AM)';
            }
            
            container.innerHTML = `
                <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-green);">
                    <div style="font-weight: bold; color: var(--accent-green); margin-bottom: 0.5rem;">‚úÖ What to Monitor</div>
                    <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                        <li><strong style="color: var(--accent-green);">üî¥ Currently Active:</strong> ${currentSession}</li>
                        <li><strong>‚è∞ Next Session:</strong> ${nextSession} in ${timeToNextText}</li>
                        <li>${isKeyWindow ? `<strong style="color: var(--accent-green);">${keyWindowText}</strong>` : 'Not in key time window'}</li>
                        <li><strong>Current Time:</strong> ${estTimeString} EST</li>
                    </ul>
                </div>
                <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-yellow);">
                    <div style="font-weight: bold; color: var(--accent-yellow); margin-bottom: 0.5rem;">‚è∞ Timing is Key</div>
                    <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                        <li><strong>Best entries:</strong> 9:00-10:30 AM EST</li>
                        <li>${brinksSoon ? `<strong style="color: var(--accent-yellow);">${brinksSoon}</strong>` : 'Brinks Times: 9:45 AM, 3:45 AM'}</li>
                        <li>${trueOpenSoon ? `<strong style="color: var(--accent-red);">${trueOpenSoon}</strong>` : 'Avoid: Hour before True Opens'}</li>
                        <li>Session overlap = volatility</li>
                    </ul>
                </div>
                <div style="background: var(--card-bg); padding: 1.25rem; border-radius: 8px; border-left: 4px solid var(--accent-red);">
                    <div style="font-weight: bold; color: var(--accent-red); margin-bottom: 0.5rem;">‚ö†Ô∏è Risk Management</div>
                    <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.95rem; line-height: 1.6;">
                        <li>Max 1-2% risk per trade</li>
                        <li>No more than 3 positions open</li>
                        <li>${currentSession.includes('Asian') || currentSession.includes('PM') ? '<strong style="color: var(--accent-red);">Tighter stops - Low volume session</strong>' : 'Tighter stops during low volume'}</li>
                        <li>Scale out at targets (TP1, TP2, TP3)</li>
                    </ul>
                </div>
            `;
        }
        
        // Update every second
        updateLiveConsiderations();
        setInterval(updateLiveConsiderations, 1000);
    </script>
    <script src="../js/keyboard-shortcuts.js"></script>
    <script src="../js/alerts.js"></script>
    <script src="../js/live-session-tracker.js"></script>
</body>
</html>
